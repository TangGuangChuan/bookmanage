<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="UTF-8">
		<meta name="renderer" content="webkit">
  		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>图书借阅管理系统</title>
		<link rel="stylesheet" type="text/css" href="../static/admin/layui/css/layui.css" th:href="@{/admin/layui/css/layui.css}"/>
		<link rel="stylesheet" type="text/css" href="../static/admin/css/admin.css" th:href="@{/admin/css/admin.css}"/>
	</head>
	<body>
		<div class="wrap-container welcome-container">
			<div class="row">
				<div class="welcome-left-container col-lg-12">
					<div class="data-show">
						<ul class="clearfix">
							<li class="col-sm-12 col-md-4 col-xs-12">
								<a href="javascript:;" class="clearfix">
									<div class="icon-bg bg-org f-l">
										<span class="iconfont">&#xe606;</span>
									</div>
									<div class="right-text-con">
										<p class="name">用户数</p>
										<p><span class="color-org" id="userCount"></span>数据<span class="iconfont">&#xe628;</span></p>
									</div>
								</a>
							</li>
							<li class="col-sm-12 col-md-4 col-xs-12">
								<a href="javascript:;" class="clearfix">
									<div class="icon-bg bg-blue f-l">
										<span class="iconfont">&#xe602;</span>
									</div>
									<div class="right-text-con">
										<p class="name">图书数</p>
										<p><span class="color-blue" id="bookCount"></span>数据<span class="iconfont">&#xe628;</span></p>
									</div>
								</a>
							</li>
							<li class="col-sm-12 col-md-4 col-xs-12">
								<a href="javascript:;" class="clearfix">
									<div class="icon-bg bg-green f-l">
										<span class="iconfont">&#xe605;</span>
									</div>
									<div class="right-text-con">
										<p class="name">借阅数</p>
										<p><span class="color-green" id="borrowCount"></span>数据<span class="iconfont">&#xe60f;</span></p>
									</div>
								</a>
							</li>
						</ul>
					</div>
					<!--图表-->
					<div class="chart-panel panel panel-default">
						<div class="panel-body" id="chart" style="height: 376px;">
						</div>
					</div>
					<!--服务器信息-->
					<div class="server-panel panel panel-default">
						<div class="panel-header">服务器信息</div>
						<div class="panel-body clearfix">
							<div class="col-md-2">
								<p class="title">服务器环境</p>
								<span class="info">Apache Tomcat/9.0.41</span>
							</div>
							<div class="col-md-2">
								<p class="title">服务器IP地址</p>
								<span class="info">127.0.0.1   </span>
							</div>
							<div class="col-md-2">
								<p class="title">服务器域名</p>
								<span class="info">localhost </span>
							</div>
							<div class="col-md-2">
								<p class="title"> java版本</p>
								<span class="info">1.8</span>
							</div>
							<div class="col-md-2">
								<p class="title">数据库信息</p>
								<span class="info">mysql5.7 </span>
							</div>
							<div class="col-md-2">
								<p class="title">服务器当前时间</p>
								<span class="info" id="serverTime"></span>
							</div>
						</div>
					</div>
					<!--联系-->
					<div class="panel panel-default contact-panel">
						<div class="panel-header">联系我们</div>
						<div class="panel-body">
							<p>QQ：616934150</p>
							<p>E-mail:616934150@qq.com</p>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script src="../static/admin/layui/layui.js" type="text/javascript" th:src="@{/admin/layui/layui.js}"></script>
		<script src="../static/admin/lib/echarts/echarts.js" th:src="@{/admin/lib/echarts/echarts.js}"></script>
		<script type="text/javascript">
			layui.use(['layer','jquery'], function(){
				var layer 	= layui.layer;
				var $=layui.jquery;
				//图表
				var myChart;
				require.config({
				    paths: {
				        echarts: '../admin/lib/echarts'
				    }
				});
				$.ajax({
					url: '../index/getdata',
					dataType: 'json',
					type: 'get',
					success: function (data) {
						$("#userCount").text(data.data.userCount);
						$("#bookCount").text(data.data.bookCount);
						$("#borrowCount").text(data.data.borrowCount);
						$("#serverTime").text(data.data.serverTime);
						require(
								[
									'echarts',
									'echarts/chart/bar',
									'echarts/chart/line',
									'echarts/chart/map'
								],
								function (ec) {
									//--- 折柱 ---
									myChart = ec.init(document.getElementById('chart'));
									myChart.setOption(
											{
												title: {
													text: "最近7天数据统计",
													textStyle: {
														color: "rgb(85, 85, 85)",
														fontSize: 18,
														fontStyle: "normal",
														fontWeight: "normal"
													}
												},
												tooltip: {
													trigger: "axis"
												},
												legend: {
													data: ["用户", "图书", "借阅"],
													selectedMode: false,
												},
												toolbox: {
													show: true,
													feature: {
														dataView: {
															show: false,
															readOnly: true
														},
														magicType: {
															show: false,
															type: ["line", "bar", "stack", "tiled"]
														},
														restore: {
															show: true
														},
														saveAsImage: {
															show: true
														},
														mark: {
															show: false
														}
													}
												},
												calculable: false,
												xAxis: [
													{
														type: "category",
														boundaryGap: false,
														data: data.data.xData
													}
												],
												yAxis: [
													{
														type: "value"
													}
												],
												grid: {
													x2: 30,
													x: 50
												},
												series: [
													{
														name: "用户",
														type: "line",
														smooth: true,
														itemStyle: {
															normal: {
																areaStyle: {
																	type: "default"
																}
															}
														},
														data: data.data.userYData
													},
													{
														name: "图书",
														type: "line",
														smooth: true,
														itemStyle: {
															normal: {
																areaStyle: {
																	type: "default"
																}
															}
														},
														data: data.data.bookYData
													},
													{
														name: "借阅",
														type: "line",
														smooth: true,
														itemStyle: {
															normal: {
																areaStyle: {
																	type: "default"
																},
																color: "rgb(110, 211, 199)"
															}
														},
														data: data.data.borrowYData
													}
												]
											}
									);
								}
						);
						$(window).resize(function(){
							myChart.resize();
						})
					}
				})

			});
		</script>
	</body>
</html>
